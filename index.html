<!DOCTYPE html>
<html>
<head>
<style> 
body {
	background: #D2FAF7;
	font-family: "Trebuchet MS", Helvetica, sans-serif
}

canvas {
	padding-left: 0;
	padding-right: 0;
	margin-left: auto;
	margin-right: auto;
	display: block;
}
</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Fonserbc</title>

<script type="text/javascript" src="gl-matrix-min.js"></script>
<script type="text/javascript" src="AssetManager.js"></script>
<script type="text/javascript" src="Cube.js"></script>

<!-- Vertex shader -->
<script id="shader-vs" type="x-shader/x-vertex">
	precision mediump float;

    attribute vec3 aPosition;
    attribute vec3 aNormal;
    attribute vec2 aTexCoord;

    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;
    uniform mat3 uNMatrix;
	uniform vec3 uLightPos;

    varying float vlightNormalApport;
    varying vec2 vTexCoord;
	varying vec3 vPos;

    void main(void) {
        vec4 mvPosition = uMVMatrix * vec4(aPosition, 1.0);
		vPos = mvPosition.xyz;

        vec3 transformedNormal = uNMatrix * normalize(aNormal);
        vlightNormalApport = dot(normalize(transformedNormal), normalize(uLightPos - mvPosition.xyz));

        gl_Position = uPMatrix * mvPosition;
			
		vTexCoord = aTexCoord;
    }
</script>

<!-- Fragment shader -->
<script id="shader-fs" type="x-shader/x-fragment">
    precision mediump float;

	uniform vec3 uLightPos;
	
    varying float vlightNormalApport;
	varying vec2 vTexCoord;
	varying vec3 vPos;

	uniform sampler2D sampler;
	
    void main(void) {		
		float lightDist = length(uLightPos - vPos);
		float minLightDist = 27.5;
		float maxLightDist = 15.0;
		float lightDistanceApport = (1.0 - (lightDist - maxLightDist)/(minLightDist - maxLightDist));
	
        gl_FragColor = vec4(texture2D(sampler, vTexCoord).rgb * lightDistanceApport * vlightNormalApport, 1.0);
    }
</script>
<!-- AnimatedHeader -->
<script type="text/javascript" src="FonserbcAnimatedHeader.js"></script>

</head>

<!-- Some credit to Towerthousand for his WebGL github repo at https://github.com/Towerthousand/WebGL-Test/ which helped <3 -->
<body onload="initHeader();">
	<canvas id="canvas" width="256" height="256">
        Your browser doesn't appear to support the HTML5 <code>&lt;canvas&gt;</code> element.
    </canvas>

	<div>
		<h2>fonserbc</h2>
		<p>1992' Deltebre, Barcelona, Catalunya, Spain.</p>
		<p>My name is Ferran Bertomeu Castells, also known as <b>fonserbc</b> over the place.</p>
		<p>I currently study Computer Engineering at the <i>Facultat d'Informàtica de Barcelona</i> (FIB) of the <i>Universitat Politécnica de Catalunya</i>(UPC)</p>
		<p>Event currentlier I am studying in <i>Kungliga Tekniska Högskolan</i> (KTH) in Stockholm</p>
		<p>I live near Barcelona, but currently living near Stockholm</p>
	</div>
</body>
</html>
